<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–¢–µ—Å—Ç: –£—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä if –≤ Python</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9fbfd;
      color: #333;
      line-height: 1.6;
      padding: 20px;
      max-width: 700px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 20px;
    }
    #blocked-message {
      background: #fff3cd;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 20px;
      color: #856404;
      border: 1px solid #ffeaa7;
    }
    #quiz, #result {
      background: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }
    .question-text {
      font-size: 18px;
      margin-bottom: 20px;
    }
    pre {
      background-color: #f4f6f8;
      padding: 12px;
      border-left: 4px solid #3498db;
      overflow-x: auto;
      font-size: 14px;
      margin: 12px 0;
      border-radius: 4px;
      white-space: pre-wrap;
    }
    .option {
      margin: 12px 0;
      display: flex;
      align-items: flex-start;
    }
    .option input {
      margin-top: 6px;
    }
    .option strong {
      margin-right: 8px;
    }
    button {
      display: block;
      margin: 25px auto 0;
      padding: 10px 24px;
      font-size: 16px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #2980b9;
    }
    button:disabled {
      background-color: #bdc3c7;
      cursor: not-allowed;
    }
    #result {
      display: none;
      text-align: center;
    }
    .score {
      font-size: 24px;
      font-weight: bold;
      color: #27ae60;
      margin: 15px 0;
    }
    .feedback {
      margin-top: 15px;
      text-align: left;
    }
    .correct { color: #27ae60; }
    .wrong { color: #e74c3c; }
    .timer {
      color: #e67e22;
      font-weight: bold;
    }
    /* –ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è */
    #teacher-panel {
      display: none;
      margin-top: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 10px;
      border: 2px dashed #2c3e50;
    }
    #teacher-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #2c3e50;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1000;
    }
    .teacher-btn {
      background-color: #2c3e50;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
      font-size: 14px;
    }
    .teacher-btn.reset {
      background-color: #e74c3c;
    }
    .teacher-btn.export {
      background-color: #27ae60;
    }
    .teacher-btn.randomize {
      background-color: #9b59b6;
    }
    #question-counter {
      text-align: center;
      margin-bottom: 15px;
      font-size: 14px;
      color: #7f8c8d;
    }
    /* –û–∫–Ω–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è */
    #password-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }
    #password-form {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      width: 300px;
      text-align: center;
    }
    #password-form h3 {
      margin-top: 0;
      color: #2c3e50;
    }
    #password-input {
      width: 100%;
      padding: 10px;
      margin: 15px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
      box-sizing: border-box;
    }
    #password-error {
      color: #e74c3c;
      margin-top: 10px;
      display: none;
    }
    .password-btn {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      width: 100%;
      margin-top: 10px;
    }
    .password-btn:hover {
      background-color: #2980b9;
    }
  </style>
</head>
<body>

  <h1>üß™ –¢–µ—Å—Ç: –£—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä if –≤ Python</h1>

  <div id="blocked-message" style="display:none;">
    <p>‚è≥ –í—ã —É–∂–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Ç–µ—Å—Ç. –°–ª–µ–¥—É—é—â–∞—è –ø–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ <span id="time-left" class="timer"></span>.</p>
    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∑–∂–µ.</p>
  </div>

  <div id="quiz" style="display:none;">
    <div id="question-counter"></div>
    <div id="question-container"></div>
    <button id="next-btn" onclick="nextQuestion()">–î–∞–ª–µ–µ</button>
  </div>

  <div id="result" style="display:none;">
    <h2>–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à—ë–Ω!</h2>
    <p>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</p>
    <div class="score" id="final-score"></div>
    <div class="feedback" id="feedback"></div>
    <button id="restart-btn" style="display:none;" onclick="location.reload()">–ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
  </div>

  <!-- –û–∫–Ω–æ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è -->
  <div id="password-modal">
    <div id="password-form">
      <h3>üîê –í—Ö–æ–¥ –¥–ª—è —É—á–∏—Ç–µ–ª—è</h3>
      <p>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</p>
      <input type="password" id="password-input" placeholder="–ü–∞—Ä–æ–ª—å">
      <div id="password-error">–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</div>
      <button class="password-btn" onclick="checkPassword()">–í–æ–π—Ç–∏</button>
      <button class="password-btn" onclick="closePasswordModal()" style="background-color: #95a5a6; margin-top: 5px;">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
  <div id="teacher-panel">
    <h3 style="color: #2c3e50; margin-top: 0;">üìä –ü–∞–Ω–µ–ª—å —É—á–∏—Ç–µ–ª—è</h3>
    
    <div style="margin-bottom: 15px;">
      <button class="teacher-btn" onclick="showAllAnswers()">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –æ—Ç–≤–µ—Ç—ã</button>
      <button class="teacher-btn randomize" onclick="toggleRandomization()">–†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è: <span id="random-status">–í–ö–õ</span></button>
      <button class="teacher-btn reset" onclick="resetTest()">–°–±—Ä–æ—Å–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è –≤—Å–µ—Ö</button>
      <button class="teacher-btn export" onclick="exportResults()">–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</button>
      <button class="teacher-btn" onclick="logoutTeacher()" style="background-color: #e74c3c;">–í—ã–π—Ç–∏</button>
    </div>
    
    <div id="teacher-info" style="display:none;">
      <h4>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:</h4>
      <ol id="correct-answers-list"></ol>
      
      <h4>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∞:</h4>
      <div style="margin-bottom: 10px;">
        <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤:</label>
        <input type="number" id="question-count" min="5" max="35" value="7" style="width: 60px; margin-left: 10px;">
        <button class="teacher-btn" onclick="updateQuestionCount()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
      </div>
      
      <h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Å—Ç–µ:</h4>
      <p>–í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –±–∞–∑–µ: <span id="total-questions">35</span></p>
      <p>–í–æ–ø—Ä–æ—Å–æ–≤ –≤ —Ç–µ—Å—Ç–µ: <span id="test-questions">7</span></p>
      <p>–í–µ—Ä–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤ —ç—Ç–æ–º —Å–µ–∞–Ω—Å–µ: <span id="correct-count">0</span></p>
      
      <h4>–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞:</h4>
      <p>–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: <span id="block-time">30</span> –º–∏–Ω—É—Ç</p>
      <button class="teacher-btn" onclick="changeBlockTime()">–ò–∑–º–µ–Ω–∏—Ç—å –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏</button>
    </div>
  </div>

  <button id="teacher-toggle" onclick="showPasswordModal()">üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å</button>

  <script>
    // –ü–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–Ω–µ–ª–∏ —É—á–∏—Ç–µ–ª—è
    const TEACHER_PASSWORD = "–ê–Ω—Ç–æ–Ω"; // –ü–∞—Ä–æ–ª—å: "–ê–Ω—Ç–æ–Ω"
    let isTeacherLoggedIn = false;

    // –ë–∞–Ω–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (35 –≤–æ–ø—Ä–æ—Å–æ–≤)
    const questionBank = [
      // === –í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ if (15 –≤–æ–ø—Ä–æ—Å–æ–≤) ===
      {
        text: "–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —É—Å–ª–æ–≤–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä <code>if</code> –≤ Python?",
        type: "choice",
        options: [
          "–ü–æ–≤—Ç–æ—Ä—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑",
          "–í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è",
          "–í—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥",
          "–í—ã–≤–æ–¥–∏—Ç –æ—à–∏–±–∫—É"
        ],
        correct: 1,
        category: "if"
      },
      {
        text: "–ö–∞–∫–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∫–æ–¥–∞ –Ω–∞–ø–∏—Å–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ?",
        type: "code-choice",
        code: null,
        options: [
          'if x > 5\n    print("–ë–æ–ª—å—à–µ –ø—è—Ç–∏")',
          'if x > 5:\n    print("–ë–æ–ª—å—à–µ –ø—è—Ç–∏")',
          'if (x > 5):\n    print("–ë–æ–ª—å—à–µ –ø—è—Ç–∏")',
          'if x > 5 then:\n    print("–ë–æ–ª—å—à–µ –ø—è—Ç–∏")'
        ],
        correct: 1,
        category: "if"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥?",
        type: "code-choice",
        code: 'age = 14\nif age >= 12:\n    print("–ü–æ–¥—Ä–æ—Å—Ç–æ–∫")\nelse:\n    print("–†–µ–±—ë–Ω–æ–∫")',
        options: [
          "–†–µ–±—ë–Ω–æ–∫",
          "–ü–æ–¥—Ä–æ—Å—Ç–æ–∫",
          "–ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–µ–¥–µ—Ç",
          "–û—à–∏–±–∫–∞"
        ],
        correct: 1,
        category: "if"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥?",
        type: "code-choice",
        code: 'age = 10\nif age >= 12:\n    print("–ü–æ–¥—Ä–æ—Å—Ç–æ–∫")\nelse:\n    print("–†–µ–±—ë–Ω–æ–∫")',
        options: [
          "–†–µ–±—ë–Ω–æ–∫",
          "–ü–æ–¥—Ä–æ—Å—Ç–æ–∫",
          "–ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–µ–¥–µ—Ç",
          "–û—à–∏–±–∫–∞"
        ],
        correct: 0,
        category: "if"
      },
      {
        text: "–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —á–∏—Å–ª–æ <strong>—á—ë—Ç–Ω–æ–µ</strong>?",
        type: "choice",
        options: [
          "if number % 2 == 1:",
          "if number / 2 == 0:",
          "if number % 2 == 0:",
          "if number // 2 == 0:"
        ],
        correct: 2,
        category: "if"
      },
      {
        text: "–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —á–∏—Å–ª–æ <strong>–Ω–µ—á—ë—Ç–Ω–æ–µ</strong>?",
        type: "choice",
        options: [
          "if number % 2 == 1:",
          "if number / 2 != 0:",
          "if number % 2 == 0:",
          "if number // 2 == 1:"
        ],
        correct: 0,
        category: "if"
      },
      {
        text: "–ö–∞–∫–æ–π –∏–∑ —ç—Ç–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã–≤–µ–¥–µ—Ç —Å—Ç—Ä–æ–∫—É '–ù–æ–ª—å' –ø—Ä–∏ x = 0?",
        type: "code-choice",
        code: null,
        options: [
          'if x != 0:\n    print("–ù–æ–ª—å")',
          'if x == 0:\n    print("–ù–æ–ª—å")',
          'if x:\n    print("–ù–æ–ª—å")',
          'if not x:\n    print("–ù–µ –Ω–æ–ª—å")'
        ],
        correct: 1,
        category: "if"
      },
      {
        text: "–ö–∞–∫–æ–π –∏–∑ —ç—Ç–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã–≤–µ–¥–µ—Ç —Å—Ç—Ä–æ–∫—É '–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ' –ø—Ä–∏ x = 5?",
        type: "code-choice",
        code: null,
        options: [
          'if x < 0:\n    print("–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ")',
          'if x > 0:\n    print("–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ")',
          'if x == 0:\n    print("–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ")',
          'if x != 5:\n    print("–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ")'
        ],
        correct: 1,
        category: "if"
      },
      {
        text: "–ö–∞–∫–æ–µ —É—Å–ª–æ–≤–∏–µ –±—É–¥–µ—Ç –∏—Å—Ç–∏–Ω–Ω—ã–º –ø—Ä–∏ temperature = 25?",
        type: "choice",
        options: [
          "if temperature > 30:",
          "if temperature <= 20:",
          "if temperature == 25:",
          "if temperature != 25:"
        ],
        correct: 2,
        category: "if"
      },
      {
        text: "–ö–∞–∫–æ–µ —É—Å–ª–æ–≤–∏–µ –±—É–¥–µ—Ç –∏—Å—Ç–∏–Ω–Ω—ã–º –ø—Ä–∏ score = 85?",
        type: "choice",
        options: [
          "if score < 60:",
          "if score >= 80:",
          "if score == 70:",
          "if score <= 50:"
        ],
        correct: 1,
        category: "if"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –∫–æ–¥ –ø—Ä–∏ n = 7?<br><pre>n = 7\nif n > 5:\n    print('–ë–æ–ª—å—à–µ –ø—è—Ç–∏')\nelse:\n    print('–ú–µ–Ω—å—à–µ –ø—è—Ç–∏')</pre>",
        type: "choice",
        options: [
          "–ë–æ–ª—å—à–µ –ø—è—Ç–∏",
          "–ú–µ–Ω—å—à–µ –ø—è—Ç–∏",
          "–ù–∏—á–µ–≥–æ",
          "–û—à–∏–±–∫–∞"
        ],
        correct: 0,
        category: "if"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –∫–æ–¥ –ø—Ä–∏ n = 3?<br><pre>n = 3\nif n > 5:\n    print('–ë–æ–ª—å—à–µ –ø—è—Ç–∏')\nelse:\n    print('–ú–µ–Ω—å—à–µ –ø—è—Ç–∏')</pre>",
        type: "choice",
        options: [
          "–ë–æ–ª—å—à–µ –ø—è—Ç–∏",
          "–ú–µ–Ω—å—à–µ –ø—è—Ç–∏",
          "–ù–∏—á–µ–≥–æ",
          "–û—à–∏–±–∫–∞"
        ],
        correct: 1,
        category: "if"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –∫–æ–¥ –ø—Ä–∏ x = 10, y = 5?<br><pre>x = 10\ny = 5\nif x > y:\n    print('X –±–æ–ª—å—à–µ')\nelse:\n    print('Y –±–æ–ª—å—à–µ')</pre>",
        type: "choice",
        options: [
          "X –±–æ–ª—å—à–µ",
          "Y –±–æ–ª—å—à–µ",
          "–ù–∏—á–µ–≥–æ",
          "–û—à–∏–±–∫–∞"
        ],
        correct: 0,
        category: "if"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç –∫–æ–¥ –ø—Ä–∏ x = 3, y = 8?<br><pre>x = 3\ny = 8\nif x > y:\n    print('X –±–æ–ª—å—à–µ')\nelse:\n    print('Y –±–æ–ª—å—à–µ')</pre>",
        type: "choice",
        options: [
          "X –±–æ–ª—å—à–µ",
          "Y –±–æ–ª—å—à–µ",
          "–ù–∏—á–µ–≥–æ",
          "–û—à–∏–±–∫–∞"
        ],
        correct: 1,
        category: "if"
      },
      {
        text: "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å —É—Å–ª–æ–≤–∏–µ '–µ—Å–ª–∏ a —Ä–∞–≤–Ω–æ b'?",
        type: "code-choice",
        code: null,
        options: [
          'if a = b:',
          'if a == b:',
          'if a === b:',
          'if a equals b:'
        ],
        correct: 1,
        category: "if"
      },

      // === –í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ input() (10 –≤–æ–ø—Ä–æ—Å–æ–≤) ===
      {
        text: "–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è <code>input()</code> –≤ Python?",
        type: "choice",
        options: [
          "–í—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —ç–∫—Ä–∞–Ω",
          "–°—á–∏—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã",
          "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏–µ",
          "–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —á–∏—Å–ª–æ –≤ —Å—Ç—Ä–æ–∫—É"
        ],
        correct: 1,
        category: "input"
      },
      {
        text: "–ö–∞–∫–æ–π –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—á–∏—Ç—ã–≤–∞–µ—Ç —á–∏—Å–ª–æ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã?",
        type: "code-choice",
        code: null,
        options: [
          'num = input("–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ: ")',
          'num = int(input("–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ: "))',
          'num = input(int("–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ: "))',
          'num = print(input("–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ: "))'
        ],
        correct: 1,
        category: "input"
      },
      {
        text: "–ö–∞–∫–æ–π –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã?",
        type: "code-choice",
        code: null,
        options: [
          'name = int(input("–ò–º—è: "))',
          'name = input("–ò–º—è: ")',
          'name = str("–ò–º—è: ")',
          'name = print(input("–ò–º—è: "))'
        ],
        correct: 1,
        category: "input"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥, –µ—Å–ª–∏ –≤–≤–µ—Å—Ç–∏ '10'?<br><pre>age = input(\"–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç? \")\nprint(\"–í–∞–º \" + age + \" –ª–µ—Ç\")</pre>",
        type: "choice",
        options: [
          "–í–∞–º 10 –ª–µ—Ç",
          "–í–∞–º '10' –ª–µ—Ç",
          "–û—à–∏–±–∫–∞",
          "–ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–µ–¥–µ—Ç"
        ],
        correct: 0,
        category: "input"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥, –µ—Å–ª–∏ –≤–≤–µ—Å—Ç–∏ '–ú–∞—Ä–∏—è'?<br><pre>name = input(\"–í–∞—à–µ –∏–º—è: \")\nprint(\"–ü—Ä–∏–≤–µ—Ç, \" + name)</pre>",
        type: "choice",
        options: [
          "–ü—Ä–∏–≤–µ—Ç, –ú–∞—Ä–∏—è",
          "–ü—Ä–∏–≤–µ—Ç, '–ú–∞—Ä–∏—è'",
          "–û—à–∏–±–∫–∞",
          "–ù–∏—á–µ–≥–æ"
        ],
        correct: 0,
        category: "input"
      },
      {
        text: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?",
        type: "choice",
        options: [
          "num = input()",
          "num = int(input())",
          "num = str(input())",
          "num = float(input())"
        ],
        correct: 1,
        category: "input"
      },
      {
        text: "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?",
        type: "choice",
        options: [
          "num = input()",
          "num = int(input())",
          "num = str(input())",
          "num = float(input())"
        ],
        correct: 3,
        category: "input"
      },
      {
        text: "–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –≤–≤–µ—Å—Ç–∏ –Ω–µ —á–∏—Å–ª–æ –≤ —ç—Ç–æ–º –∫–æ–¥–µ?<br><pre>num = int(input(\"–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ: \"))</pre>",
        type: "choice",
        options: [
          "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π",
          "–ß–∏—Å–ª–æ —Å—Ç–∞–Ω–µ—Ç —Ä–∞–≤–Ω—ã–º 0",
          "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤–≤–æ–¥",
          "–ß–∏—Å–ª–æ —Å—Ç–∞–Ω–µ—Ç —Å—Ç—Ä–æ–∫–æ–π"
        ],
        correct: 0,
        category: "input"
      },
      {
        text: "–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –≤–≤–µ—Å—Ç–∏ '3.14' –≤ —ç—Ç–æ—Ç –∫–æ–¥?<br><pre>num = int(input(\"–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ: \"))</pre>",
        type: "choice",
        options: [
          "–ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π",
          "–ß–∏—Å–ª–æ —Å—Ç–∞–Ω–µ—Ç —Ä–∞–≤–Ω—ã–º 3",
          "–ß–∏—Å–ª–æ —Å—Ç–∞–Ω–µ—Ç —Ä–∞–≤–Ω—ã–º 3.14",
          "–ß–∏—Å–ª–æ —Å—Ç–∞–Ω–µ—Ç —Å—Ç—Ä–æ–∫–æ–π"
        ],
        correct: 0,
        category: "input"
      },
      {
        text: "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–≤–µ—Å—Ç–∏ –≤–æ–∑—Ä–∞—Å—Ç?",
        type: "code-choice",
        code: null,
        options: [
          'age = input()',
          'age = input("–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç? ")',
          'age = print("–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç? ")',
          'input("–°–∫–æ–ª—å–∫–æ –≤–∞–º –ª–µ—Ç? ")'
        ],
        correct: 1,
        category: "input"
      },

      // === –í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ print() (10 –≤–æ–ø—Ä–æ—Å–æ–≤) ===
      {
        text: "–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è <code>print()</code> –≤ Python?",
        type: "choice",
        options: [
          "–°—á–∏—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥",
          "–í—ã–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —ç–∫—Ä–∞–Ω",
          "–í—ã–ø–æ–ª–Ω—è–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏",
          "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è"
        ],
        correct: 1,
        category: "print"
      },
      {
        text: "–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç '–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!'?",
        type: "code-choice",
        code: null,
        options: [
          'print("–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!")',
          'print(–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!)',
          'print "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"',
          'echo "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"'
        ],
        correct: 0,
        category: "print"
      },
      {
        text: "–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç 'Python - —ç—Ç–æ –∫—Ä—É—Ç–æ!'?",
        type: "code-choice",
        code: null,
        options: [
          'print(Python - —ç—Ç–æ –∫—Ä—É—Ç–æ!)',
          'print("Python - —ç—Ç–æ –∫—Ä—É—Ç–æ!")',
          'print "Python - —ç—Ç–æ –∫—Ä—É—Ç–æ!"',
          'echo "Python - —ç—Ç–æ –∫—Ä—É—Ç–æ!"'
        ],
        correct: 1,
        category: "print"
      },
      {
        text: "–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π x?",
        type: "code-choice",
        code: null,
        options: [
          'print("x")',
          'print(x)',
          'print x',
          'echo x'
        ],
        correct: 1,
        category: "print"
      },
      {
        text: "–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π score?",
        type: "code-choice",
        code: null,
        options: [
          'print("score")',
          'print(score)',
          'print score',
          'display score'
        ],
        correct: 1,
        category: "print"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥?<br><pre>x = 5\ny = 3\nprint(x + y)</pre>",
        type: "choice",
        options: [
          "x + y",
          "8",
          "5 + 3",
          "–û—à–∏–±–∫–∞"
        ],
        correct: 1,
        category: "print"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥?<br><pre>a = 10\nb = 2\nprint(a * b)</pre>",
        type: "choice",
        options: [
          "a * b",
          "20",
          "10 * 2",
          "–û—à–∏–±–∫–∞"
        ],
        correct: 1,
        category: "print"
      },
      {
        text: "–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª?",
        type: "code-choice",
        code: null,
        options: [
          'print(10, 20, 30)',
          'print(10 20 30)',
          'print("10 20 30")',
          'print 10, 20, 30'
        ],
        correct: 0,
        category: "print"
      },
      {
        text: "–ö–∞–∫ –≤—ã–≤–µ—Å—Ç–∏ '–ò–º—è: –ê–Ω–Ω–∞, –í–æ–∑—Ä–∞—Å—Ç: 25'?",
        type: "code-choice",
        code: null,
        options: [
          'print("–ò–º—è: –ê–Ω–Ω–∞, –í–æ–∑—Ä–∞—Å—Ç: 25")',
          'print(–ò–º—è: –ê–Ω–Ω–∞, –í–æ–∑—Ä–∞—Å—Ç: 25)',
          'print "–ò–º—è: –ê–Ω–Ω–∞, –í–æ–∑—Ä–∞—Å—Ç: 25"',
          'echo "–ò–º—è: –ê–Ω–Ω–∞, –í–æ–∑—Ä–∞—Å—Ç: 25"'
        ],
        correct: 0,
        category: "print"
      },
      {
        text: "–ß—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —ç—Ç–æ—Ç –∫–æ–¥?<br><pre>name = \"–ü–µ—Ç—è\"\nage = 12\nprint(name, \"-\", age, \"–ª–µ—Ç\")</pre>",
        type: "choice",
        options: [
          "–ü–µ—Ç—è - 12 –ª–µ—Ç",
          "name - age –ª–µ—Ç",
          "–û—à–∏–±–∫–∞",
          "–ù–∏—á–µ–≥–æ"
        ],
        correct: 0,
        category: "print"
      }
    ];

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    const BLOCK_DURATION = 30 * 60 * 1000; // 30 –º–∏–Ω—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
    const lastAttempt = localStorage.getItem('python_if_test_last_attempt');
    const now = Date.now();

    // === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∞ ===
    let isRandomized = localStorage.getItem('test_randomized') !== 'false'; // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –í–ö–õ
    let questionCount = parseInt(localStorage.getItem('test_question_count')) || 7;
    let questions = []; // –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç–µ—Å—Ç–∞
    let currentQuestion = 0;
    let userAnswers = [];

    // === –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–∞–Ω–µ–ª–∏ –ø–∞—Ä–æ–ª—è ===
    function showPasswordModal() {
      document.getElementById('password-modal').style.display = 'flex';
      document.getElementById('password-input').focus();
    }

    function closePasswordModal() {
      document.getElementById('password-modal').style.display = 'none';
      document.getElementById('password-error').style.display = 'none';
      document.getElementById('password-input').value = '';
    }

    function checkPassword() {
      const passwordInput = document.getElementById('password-input').value;
      const errorElement = document.getElementById('password-error');
      
      if (passwordInput === TEACHER_PASSWORD) {
        isTeacherLoggedIn = true;
        closePasswordModal();
        showTeacherPanel();
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–µ—Å—Å–∏—é –Ω–∞ 1 —á–∞—Å
        const sessionExpiry = Date.now() + 60 * 60 * 1000;
        localStorage.setItem('teacher_session', sessionExpiry.toString());
      } else {
        errorElement.style.display = 'block';
        document.getElementById('password-input').value = '';
        document.getElementById('password-input').focus();
        
        // –ê–Ω–∏–º–∞—Ü–∏—è –æ—à–∏–±–∫–∏
        errorElement.style.animation = 'none';
        setTimeout(() => {
          errorElement.style.animation = 'shake 0.5s';
        }, 10);
      }
    }

    // –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –æ—à–∏–±–∫–∏ –ø–∞—Ä–æ–ª—è
    const style = document.createElement('style');
    style.textContent = `
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
        20%, 40%, 60%, 80% { transform: translateX(5px); }
      }
    `;
    document.head.appendChild(style);

    function showTeacherPanel() {
      if (!isTeacherLoggedIn) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
        const sessionExpiry = localStorage.getItem('teacher_session');
        if (sessionExpiry && Date.now() < parseInt(sessionExpiry)) {
          isTeacherLoggedIn = true;
        } else {
          showPasswordModal();
          return;
        }
      }
      
      const panel = document.getElementById('teacher-panel');
      panel.style.display = 'block';
      loadTeacherInfo();
    }

    function logoutTeacher() {
      isTeacherLoggedIn = false;
      localStorage.removeItem('teacher_session');
      document.getElementById('teacher-panel').style.display = 'none';
      alert('–í—ã –≤—ã—à–ª–∏ –∏–∑ –ø–∞–Ω–µ–ª–∏ —É—á–∏—Ç–µ–ª—è.');
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è –º–∞—Å—Å–∏–≤–∞ (–∞–ª–≥–æ—Ä–∏—Ç–º –§–∏—à–µ—Ä–∞-–ô–µ—Ç—Å–∞)
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function prepareQuestions() {
      // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —Å–∫–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–º–∞–∫—Å–∏–º—É–º –∏–∑ –±–∞–Ω–∫–∞)
      const count = Math.min(questionCount, questionBank.length);
      
      // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–∑ –±–∞–Ω–∫–∞
      let selectedQuestions;
      if (isRandomized) {
        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ N
        selectedQuestions = shuffleArray(questionBank).slice(0, count);
      } else {
        // –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–µ N –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
        selectedQuestions = questionBank.slice(0, count);
      }
      
      // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
      selectedQuestions = selectedQuestions.map(q => {
        if (!q.keepOrder) { // –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫
          // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –∏–Ω–¥–µ–∫—Å–æ–≤
          const indices = Array.from({length: q.options.length}, (_, i) => i);
          // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∏–Ω–¥–µ–∫—Å—ã
          const shuffledIndices = shuffleArray(indices);
          
          // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –≤–æ–ø—Ä–æ—Å —Å –ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
          const newQuestion = {
            ...q,
            options: shuffledIndices.map(i => q.options[i]),
            originalCorrect: q.correct, // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å
            correct: shuffledIndices.indexOf(q.correct) // –ù–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
          };
          return newQuestion;
        }
        return q;
      });
      
      return selectedQuestions;
    }

    function startQuiz() {
      // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã
      questions = prepareQuestions();
      userAnswers = new Array(questions.length).fill(null);
      currentQuestion = 0;
      
      showQuestion(currentQuestion);
    }

    function showQuestion(index) {
      const q = questions[index];
      let html = `<div class="question-text">${q.text}</div>`;

      if (q.code) {
        html += `<pre>${q.code}</pre>`;
      }

      html += '<div id="options">';
      for (let i = 0; i < q.options.length; i++) {
        const letter = String.fromCharCode(65 + i);
        const content = q.type === "code-choice"
          ? `<pre>${q.options[i]}</pre>`
          : q.options[i];

        html += `
          <label class="option">
            <input type="radio" name="answer" value="${i}"
              ${userAnswers[index] == i ? 'checked' : ''}>
            <strong>${letter})</strong> ${content}
          </label>`;
      }
      html += '</div>';

      document.getElementById('question-container').innerHTML = html;
      document.getElementById('next-btn').textContent = 
        (index === questions.length - 1) ? "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç" : "–î–∞–ª–µ–µ";
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
      document.getElementById('question-counter').innerHTML = 
        `–í–æ–ø—Ä–æ—Å ${index + 1} –∏–∑ ${questions.length}`;
    }

    function nextQuestion() {
      const selected = document.querySelector('input[name="answer"]:checked');
      if (!selected) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞.");
        return;
      }
      userAnswers[currentQuestion] = parseInt(selected.value);
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
      localStorage.setItem(`question_${currentQuestion}_answer`, selected.value);

      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        showQuestion(currentQuestion);
      } else {
        finishQuiz();
      }
    }

    function saveUserAnswers() {
      for (let i = 0; i < userAnswers.length; i++) {
        if (userAnswers[i] !== null) {
          localStorage.setItem(`question_${i}_answer`, userAnswers[i].toString());
        }
      }
    }

    function finishQuiz() {
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      saveUserAnswers();
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
      localStorage.setItem('python_if_test_last_attempt', Date.now().toString());

      document.getElementById('quiz').style.display = 'none';
      document.getElementById('result').style.display = 'block';

      let score = 0;
      for (let i = 0; i < questions.length; i++) {
        if (userAnswers[i] === questions[i].correct) score++;
      }

      // –û—Ü–µ–Ω–∫–∞ –ø–æ 5-–±–∞–ª–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
      let grade;
      if (score >= questions.length * 0.85) grade = 5; // 85% –∏ –≤—ã—à–µ
      else if (score >= questions.length * 0.70) grade = 4; // 70% –∏ –≤—ã—à–µ
      else if (score >= questions.length * 0.50) grade = 3; // 50% –∏ –≤—ã—à–µ
      else grade = 2;

      document.getElementById('final-score').textContent = 
        `${score} –∏–∑ ${questions.length} | –û—Ü–µ–Ω–∫–∞: ${grade}`;

      // –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
      let feedbackHtml = '<h3>–†–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤:</h3><ul>';
      for (let i = 0; i < questions.length; i++) {
        const q = questions[i];
        const userAns = userAnswers[i];
        const correctLetter = String.fromCharCode(65 + q.correct);
        const isCorrect = userAns === q.correct;
        const className = isCorrect ? "correct" : "wrong";
        const userLetter = userAns !== null ? String.fromCharCode(65 + userAns) : "?";

        let correctAnswerText = q.type === "code-choice"
          ? `<pre>${q.options[q.correct]}</pre>`
          : q.options[q.correct];

        feedbackHtml += `
          <li class="${className}">
            –í–æ–ø—Ä–æ—Å ${i + 1}: ${isCorrect ? "‚úÖ –í–µ—Ä–Ω–æ!" : `‚ùå –í–∞—à –æ—Ç–≤–µ—Ç: ${userLetter}. –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correctLetter}`}
            ${!isCorrect ? `<br><strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç:</strong> ${correctAnswerText}` : ''}
          </li>`;
      }
      feedbackHtml += '</ul>';
      document.getElementById('feedback').innerHTML = feedbackHtml;

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –ø—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞
      const canRestart = (Date.now() - now) >= BLOCK_DURATION;
      const restartBtn = document.getElementById('restart-btn');
      if (canRestart) {
        restartBtn.style.display = 'block';
      }
    }

    // === –§—É–Ω–∫—Ü–∏–∏ –ø–∞–Ω–µ–ª–∏ —É—á–∏—Ç–µ–ª—è ===
    function loadTeacherInfo() {
      if (!isTeacherLoggedIn) return;
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–∏
      document.getElementById('random-status').textContent = isRandomized ? '–í–ö–õ' : '–í–´–ö–õ';
      document.getElementById('question-count').value = questionCount;
      document.getElementById('total-questions').textContent = questionBank.length;
      document.getElementById('test-questions').textContent = questionCount;
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      const correctCount = questions ? questions.filter((q, i) => {
        const userAnswer = localStorage.getItem(`question_${i}_answer`);
        return userAnswer && parseInt(userAnswer) === q.correct;
      }).length : 0;
      document.getElementById('correct-count').textContent = correctCount;
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
      const blockTime = localStorage.getItem('block_duration');
      if (blockTime) {
        document.getElementById('block-time').textContent = parseInt(blockTime) / (60 * 1000);
      }
    }

    function showAllAnswers() {
      if (!isTeacherLoggedIn) {
        showPasswordModal();
        return;
      }
      
      const info = document.getElementById('teacher-info');
      if (info.style.display === 'none') {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏–∑ –≤—Å–µ–≥–æ –±–∞–Ω–∫–∞
        const answersList = document.getElementById('correct-answers-list');
        answersList.innerHTML = '';
        
        questionBank.forEach((q, index) => {
          const li = document.createElement('li');
          const correctLetter = String.fromCharCode(65 + q.correct);
          const correctText = q.options ? q.options[q.correct] : '–ù–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤';
          const categoryBadge = `<span style="background: #eee; padding: 2px 6px; border-radius: 3px; font-size: 12px; margin-left: 5px;">${q.category}</span>`;
          
          li.innerHTML = `<strong>–í–æ–ø—Ä–æ—Å ${index + 1}:</strong> ${correctLetter}) ${correctText} ${categoryBadge}`;
          answersList.appendChild(li);
        });
        
        info.style.display = 'block';
      } else {
        info.style.display = 'none';
      }
    }

    function toggleRandomization() {
      if (!isTeacherLoggedIn) {
        showPasswordModal();
        return;
      }
      
      isRandomized = !isRandomized;
      localStorage.setItem('test_randomized', isRandomized);
      document.getElementById('random-status').textContent = isRandomized ? '–í–ö–õ' : '–í–´–ö–õ';
      alert(`–†–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ ${isRandomized ? '–≤–∫–ª—é—á–µ–Ω–∞' : '–æ—Ç–∫–ª—é—á–µ–Ω–∞'}. –¢–µ—Å—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω.`);
      location.reload();
    }

    function updateQuestionCount() {
      if (!isTeacherLoggedIn) {
        showPasswordModal();
        return;
      }
      
      const countInput = document.getElementById('question-count');
      const newCount = parseInt(countInput.value);
      
      if (newCount >= 5 && newCount <= questionBank.length) {
        questionCount = newCount;
        localStorage.setItem('test_question_count', questionCount);
        alert(`–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ ${questionCount}. –¢–µ—Å—Ç –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω.`);
        location.reload();
      } else {
        alert(`–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 5 –¥–æ ${questionBank.length}`);
        countInput.value = questionCount;
      }
    }

    function resetTest() {
      if (!isTeacherLoggedIn) {
        showPasswordModal();
        return;
      }
      
      if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ —Å–±—Ä–æ—Å–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ –¥–ª—è –í–°–ï–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π!")) {
        // –û—á–∏—â–∞–µ–º localStorage
        localStorage.removeItem('python_if_test_last_attempt');
        
        // –û—á–∏—â–∞–µ–º –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
        for (let i = 0; i < questionBank.length; i++) {
          localStorage.removeItem(`question_${i}_answer`);
        }
        
        alert("–¢–µ—Å—Ç —Å–±—Ä–æ—à–µ–Ω! –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É.");
        location.reload();
      }
    }

    function exportResults() {
      if (!isTeacherLoggedIn) {
        showPasswordModal();
        return;
      }
      
      // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
      const results = {
        timestamp: new Date().toISOString(),
        totalQuestionsInBank: questionBank.length,
        questionsInTest: questionCount,
        isRandomized: isRandomized,
        lastAttempt: localStorage.getItem('python_if_test_last_attempt'),
        blockDuration: localStorage.getItem('block_duration') || BLOCK_DURATION,
        userAnswers: []
      };
      
      // –°–æ–±–∏—Ä–∞–µ–º –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      for (let i = 0; i < questionCount; i++) {
        const answer = localStorage.getItem(`question_${i}_answer`);
        if (answer !== null) {
          results.userAnswers.push({
            questionNumber: i + 1,
            userAnswer: parseInt(answer),
            isCorrect: questions && questions[i] ? parseInt(answer) === questions[i].correct : null
          });
        }
      }
      
      // –°–æ–∑–¥–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
      const dataStr = JSON.stringify(results, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
      
      const exportFileDefaultName = `test_results_${new Date().toISOString().split('T')[0]}.json`;
      
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
    }

    function changeBlockTime() {
      if (!isTeacherLoggedIn) {
        showPasswordModal();
        return;
      }
      
      const newTime = prompt("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö:", "30");
      if (newTime && !isNaN(newTime) && newTime > 0) {
        const blockMs = parseInt(newTime) * 60 * 1000;
        localStorage.setItem('block_duration', blockMs);
        alert(`–í—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–æ –Ω–∞ ${newTime} –º–∏–Ω—É—Ç`);
        loadTeacherInfo();
      }
    }

    // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∞ ===
    if (lastAttempt && (now - parseInt(lastAttempt)) < BLOCK_DURATION) {
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
      document.getElementById('blocked-message').style.display = 'block';
      const timeLeftEl = document.getElementById('time-left');
      let remaining = BLOCK_DURATION - (now - parseInt(lastAttempt));
      
      const timer = setInterval(() => {
        remaining -= 1000;
        if (remaining <= 0) {
          clearInterval(timer);
          location.reload();
        } else {
          const mins = Math.floor(remaining / 60000);
          const secs = Math.floor((remaining % 60000) / 1000);
          timeLeftEl.textContent = `${mins} –º–∏–Ω ${secs} —Å–µ–∫`;
        }
      }, 1000);
    } else {
      // –ú–æ–∂–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–µ—Å—Ç
      document.getElementById('quiz').style.display = 'block';
      startQuiz();
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã—Ö–æ–¥ –∏–∑ —Å–µ—Å—Å–∏–∏ —É—á–∏—Ç–µ–ª—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('beforeunload', function() {
      if (isTeacherLoggedIn) {
        // –ù–µ –æ—á–∏—â–∞–µ–º —Å–µ—Å—Å–∏—é –ø–æ–ª–Ω–æ—Å—Ç—å—é, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
        // –°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 1 —á–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
      }
    });

    // –í–≤–æ–¥ –ø–∞—Ä–æ–ª—è –ø–æ –Ω–∞–∂–∞—Ç–∏—é Enter
    document.getElementById('password-input').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        checkPassword();
      }
    });
  </script>

</body>
</html>